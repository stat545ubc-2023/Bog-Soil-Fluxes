"0","#"
"0","extract_site_type <- function(label) {"
"0","  substr(label, 1, 2)"
"0","}"
"0","df$site_type <- sapply(df$label, extract_site_type)"
"0","average_fluxes <- df %>%"
"0","  group_by (site_type, date) %>%"
"0","  summarise (FCO2_EXP_avg = mean(FCO2_EXP, na.rm = TRUE), FCH4_EXP_avg = mean(FCH4_EXP, na.rm = TRUE))"
"2","`summarise()` has grouped output by 'site_type'. You can override using the `.groups` argument."
"0","# Grouped into different vegetation types"
"0","average_fluxes$vegetation_type <- ifelse(substr(average_fluxes$site_type, start = 1, stop = 1) == ""L"", ""PSLS"", "
"0","                             ifelse(substr(average_fluxes$site_type, start = 1, stop = 1) == ""T"", ""PSTS"", "
"0","                             ifelse(substr(average_fluxes$site_type, start = 1, stop = 1) == ""W"", ""PSW"", NA)))"
"0","# Grouped into S/R trts"
"0","average_fluxes$trts <- ifelse(substr(average_fluxes$site_type, start = 2, stop = 2) == ""S"", ""S"", "
"0","                             ifelse(substr(average_fluxes$site_type, start = 2, stop = 2) == ""R"", ""R"", NA))"
"0","average_fluxes$vegetation_type <- as.factor(average_fluxes$vegetation_type)"
"0","average_fluxes$trts <- as.factor(average_fluxes$trts)"
"0","print (average_fluxes)"
